@using ESTA.Resources
@using Microsoft.AspNetCore.Http;
@using System.Security.Claims
@using Microsoft.AspNetCore.Identity;
@using Microsoft.AspNetCore.Localization;

@inject SignInManager<User> signInManager;
@inject UserManager<User> userManager;

@inject IHttpContextAccessor contextAccessor;
@inject IOptions<RequestLocalizationOptions> LocalizationOptions;
@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var cultureItems = LocalizationOptions.Value.SupportedUICultures
        .Select(c => new SelectListItem { Value = c.Name, Text = c.NativeName })
        .ToList();
    var returnUrl = string.IsNullOrEmpty(Context.Request.Path)
        ? "~/"
        : $"~{Context.Request.Path.Value}{Context.Request.QueryString}";

    var admin = false;

    var IsSigned = signInManager.IsSignedIn(User);
    var IsAdmin = false;
    if (IsSigned)
    {
        var user = await userManager.GetUserAsync(User);
        IsAdmin = await userManager.IsInRoleAsync(user, "Admin");
    }
    var rqf = contextAccessor.HttpContext.Features.Get<IRequestCultureFeature>();
    // Culture contains the information of the requested culture
    var culture = rqf.RequestCulture.Culture.Name;
    string langTooltip = "en";
    if (culture == "en")
        langTooltip = "ar";
}
@using Microsoft.AspNetCore.Mvc.Localization
@using System.Globalization
@using Microsoft.Extensions.Localization
@using Microsoft.Extensions.Options

@inject IStringLocalizer<SharedResource> localizer;

<!DOCTYPE html>
<html lang="@CultureInfo.CurrentCulture.Name">
<head>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>ESTA - Home</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" type="image/x-icon" href="~/template/img/favicon.ico">
    <!-- Place favicon.ico in the root directory -->
    <!-- CSS here -->

    <link href="~/template/css/bootstrap.min.css" rel="stylesheet" />

    <link href="~/template/css/inner.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/template/css/owl.carousel.min.css">
    <link href="~/template/css/animate.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/template/css/magnific-popup.css">
    <link rel="stylesheet" href="~/template/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="~/template/css/themify-icons.css">
    <link rel="stylesheet" href="~/template/css/slick.css">
    <link rel="stylesheet" href="~/template/css/meanmenu.css">
    <link rel="stylesheet" href="~/template/css/default.css">
    <link href="~/template/aos/aos.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/template/css/style.css">
    <link rel="stylesheet" href="~/template/css/responsive.css">
    <link href="~/css/site.css" rel="stylesheet" />
    @*<link href="~/css/inner.css" rel="stylesheet" />*@
    <link href="~/template/aos/aos.css" rel="stylesheet" />
    @if (Thread.CurrentThread.CurrentCulture.Name == "ar")
    {

        <link href="~/template/css/style-ar.css" rel="stylesheet" />

    }


</head>

<body>
    <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->
    <!-- Add your site or application content here -->
    <!-- header-start -->
    <input type="hidden" id="langddl" value="@culture" />
    <header id="home">
        <div class="header-area">
            <!-- header-top -->
            <div class="header-top primary-bg">
                <div class="container">
                    <div class="row  justify-content-between mr-5 ml-5">
                        <div class="">
                            <div class="header-contact-info d-flex">
                                <div class="header-contact header-contact-email">
                                    <span class="ti-email"></span>
                                    <p class="email-name">info@estaegypt.org</p>
                                </div>

                                @if (User != null && User.Identity.IsAuthenticated)
                                {
                                    <div class="header-contact header-login">
                                        <span class="ti-user"></span>
                                        @if (User.IsInRole("Admin"))
                                        {

                                            <a asp-action="index" asp-area="admin" asp-controller="home" class="loginBtn">
                                                @User.FindFirstValue(ClaimTypes.Name)
                                            </a>
                                        }
                                        else
                                        {
                                            <a asp-action="profile" asp-controller="user" asp-area="" class="loginBtn">
                                                @User.FindFirstValue(ClaimTypes.Name)
                                            </a>

                                        }

                                        <a asp-action="Logout" asp-controller="Account" asp-area="" class="loginBtn">@localizer["signout"]</a>
                                    </div>
                                }
                                else
                                {
                                    <div class=" row header-contact header-login header-contact1 ">

                                        <div class="">

                                            <span class="ti-user"></span>
                                            <a asp-action="Login" asp-controller="Account" asp-area="" class="loginBtn">@localizer["signin"]</a>

                                        </div>
                                        <div>
                                            <span class="ti-user"></span>
                                            <a asp-action="Register" asp-controller="Account" asp-area="" class="loginBtn">@localizer["signup"]</a>
                                        </div>
                                    </div>
                                }




                            </div>
                        </div>
                        <div class="">
                            <div class="header-social-icon-list">
                                <ul>
                                    @if (Thread.CurrentThread.CurrentCulture.Name == "ar")
                                    {

                                        <li>



                                            <a style="display:none" onclick="changeLang('en')"
                                               data-toggle="tooltip" title="@langTooltip">
                                                <span style="color:aquamarine" class="ti-world"></span>
                                            </a>





                                            <input type="hidden" value="@Url.Action("SetCulture","Lang")" id="langUrl" />
                                        </li>

                                        <li><a href="https://www.facebook.com/ESTA.Mainpage?sfnsn=scwspwa&mibextid=RUbZ1f" target="_blank"><span class="ti-facebook"></span></a></li>
                                        <li><a href="https://www.linkedin.com/company/egyptian-society-of-technical-analysts-esta/" target="_blank"><span class="ti-linkedin"></span></a></li>

                                    }

                                    else
                                    {



                                        <li><a href="https://www.linkedin.com/company/egyptian-society-of-technical-analysts-esta/" target="_blank"><span class="ti-linkedin"></span></a></li>
                                        <li><a href="https://www.facebook.com/ESTA.Mainpage?sfnsn=scwspwa&mibextid=RUbZ1f" target="_blank"><span class="ti-facebook"></span></a></li>
                                        
                                        <li>



                                            <a style="display:none" onclick="changeLang('ar')"
                                               data-toggle="tooltip" title="@langTooltip">
                                                <span style="color:aquamarine" class="ti-world"></span>
                                            </a>




                                            <input type="hidden" value="@Url.Action("SetCulture","Lang",new {area=""})" id="langUrl" />
                                        </li>



                                    }




                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /end header-top -->
            <!-- header-bottom -->
            <div class="header-bottom-area header-sticky" style="transition: .2s;">
                <div class="container">
                    <div class="row align-items-center justify-content-between">
                        <div class="">
                            <div class="logo ar">
                                <a style="display:flex;align-items:center" asp-controller="Home" asp-action="Index" asp-area="">

                                    <img width="100px" src="~/template/img/logo/logo2.gif" alt="">
                                    <span class="header-title">
                                        @localizer["esta"]
                                    </span>
                                </a>
                            </div>
                        </div>


                        <div class="">
                            <div class="header-bottom-icon f-right">
                                <ul>
                                    <li class="toggle-search-icon">
                                        <a href="#">
                                            <span class="ti-search"></span>
                                            <div class="toggle-search-box">
                                                <form asp-action="search" asp-controller="Home" id="searchbox">
                                                    <input style="width:300px" name="query" placeholder="Search" type="text">
                                                    <button class="button-search"><span class="ti-search"></span></button>
                                                </form>
                                            </div>
                                        </a>
                                    </li>

                                </ul>
                            </div>
                            <div class="main-menu f-right">
                                <nav id="mobile-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a asp-controller="Home" asp-action="Index" asp-area="">@localizer["home"]</a>

                                        </li>
                                        <li>
                                            <a href="#">@localizer["about"]</a>
                                            <ul class="submenu">
                                                <li>
                                                    <a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="about">@localizer["about"] ESTA</a>

                                                </li>
                                                <li>

                                                    <a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="ta">@localizer["ta"]</a>

                                                </li>
                                                <li>

                                                    <a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="ethics">@localizer["ethics"]</a>
                                                </li>
                                                <li>
                                                    <a asp-area="" asp-controller="Director" asp-action="BoardofDirectors">@localizer["board"]</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#">@localizer["edu"]</a>
                                            <ul class="submenu">
                                                <li>
                                                    <a asp-area="" asp-controller="courses" asp-action="CetaCourses">@localizer["ceta"]</a>
                                                </li>
                                                <li>
                                                    <a asp-area="" asp-controller="courses" asp-action="OtherCourses">@localizer["othercourses"]</a>
                                                </li>
                                                <li>
                                                    <a asp-area="" asp-controller="courses" asp-action="CetaHolders">@localizer["cetaholders"]</a>
                                                </li>

                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#">@localizer["membership"]</a>
                                            <ul class="submenu">





                                                <li>
                                                    <a asp-area="" asp-controller="Forums" asp-action="Index">@localizer["discussionbf"]</a>
                                                </li>

                                                <li>
                                                    <a asp-area="" asp-controller="EventsNews" asp-action="Index">@localizer["events&news"]</a>
                                                </li>

                                                <li>
                                                    <a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="benefits">
                                                        @localizer["benefits"]
                                                    </a>
                                                </li>
                                                <li>
                                                    <a asp-area="" asp-controller="Account" asp-action="Register">@localizer["becamemember"]</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="ifta">@localizer["ifta"]</a>
                                        </li>
                                        <li>
                                            <a asp-area="" asp-controller="Home" asp-action="contact">@localizer["contacts"]</a>
                                        </li>




                                        @*<li>
                                        <form asp-controller="Lang" asp-action="SetCulture" asp-route-returnUrl="@returnUrl"
                                        class="form-horizontal nav-link text-dark row">
                                        <select id="langddl" name="culture"
                                        class="form-control"
                                        onchange="this.form.submit();"
                                        asp-for="@requestCulture.RequestCulture.UICulture.Name"
                                        asp-items="cultureItems">
                                        </select>
                                        </form>
                                        </li>*@
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="mobile-menu"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /end header-bottom -->
        </div>
    </header>

    <div class="">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer id="Footer">
        <div class="footer-area primary-bg pt-80">
            <div class="container">
                <div class="footer-top pb-20">
                    <div class="row">
                        <div class="col-xl-2 col-lg-3 col-md-3">
                            <div class="footer-widget mb-30">
                                <div class="footer-logo">
                                    <img src="~/template/img/logo/esta_logo1.png" alt="" class="footer-logo">
                                </div>


                            </div>
                        </div><div class="col-xl-4 col-lg-3 col-md-4">
                            <div class="footer-widget mb-30">
                                <div class="footer-heading">
                                    <h1>@localizer["quicklinks"]</h1>
                                </div>
                                <div class="footer-menu clearfix">
                                    <ul>

                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-controller="Home" asp-action="Index" asp-area="">@localizer["home"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="benefits">@localizer["membership"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="about">@localizer["about"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="Home" asp-action="About" asp-route-type="ifta">@localizer["ifta"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="courses" asp-action="CetaCourses">@localizer["edu"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="Home" asp-action="contact">@localizer["contacts"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="Home" asp-action="terms">@localizer["termsCon"]</a></p></li>
                                        <li><p class="footer-menu-item"><span class="ti-angle-double-right"></span><a asp-area="" asp-controller="Home" asp-action="privacy">@localizer["pp"]</a></p></li>

                                    </ul>
                                </div>
                            </div>
                        </div><div class="col-xl-4 col-lg-4  col-md-5">
                            <div class="footer-widget mb-30">
                                <div class="footer-heading">
                                    <h1>@localizer["contactus"]</h1>
                                </div>
                                <div class="footer-contact-list">
                                    <div class="single-footer-contact-info row">
                                        <span class="ti-headphone col-1 "></span>

                                        <span class="footer-contact-list-text">+202 - 37629820/  +202 - 37629830/+02 1064000515</span>
                                    </div>
                                    <br />
                                    <div class="single-footer-contact-info row">
                                        <span class="ti-email col-1 "></span>
                                        <span class="footer-contact-list-text">info@estaegypt.org</span>
                                    </div>
                                    <br />
                                    <div class="single-footer-contact-info row">
                                        <span class="ti-location-pin col-1"></span>
                                        <span class="footer-contact-list-text">45 , Mossadak St. , Dokki , 6th floor, Appartment 11, Giza</span>
                                    </div>
                                </div>

                            </div>
                        </div><div class="col-xl-2 col-lg-2  col-md-12">
                            <div class="footer-widget mb-30">
                                <div class="footer-heading">
                                    <h1>@localizer["followus"]</h1>
                                </div>
                                <div class="footer-social-icon-list">
                                    <ul>
                                        <li><a href="https://www.facebook.com/ESTA.Mainpage?sfnsn=scwspwa&mibextid=RUbZ1f" target="_blank"><span class="ti-facebook"></span></a></li>
                                        <li><a href="https://www.linkedin.com/company/egyptian-society-of-technical-analysts-esta/" target="_blank"><span class="ti-linkedin"></span></a></li>


                                    </ul>
                                </div>

                            </div>
                        </div>



                    </div>
                </div>
                <div class="footer-bottom pt-25 pb-25">
                    <div class="container">
                        <div class="row">
                            <div class="col-xl-12">
                                <div class="footer-copyright text-center">
                                    <div class="container">
                                        <div class="copyright">
                                            <span>@localizer["copyrights"]</span>

                                        </div>
                                        <div class="credits">
                                            <span>@localizer["powerdby"]</span>
                                            <a href="https://www.mist-net.com" target="_blank">@localizer["mist"]</a>

                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer end -->
    <!-- JS here -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/template/js/vendor/modernizr-3.5.0.min.js"></script>
    <script src="~/template/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="~/template/aos/aos.js"></script>
    <script src="~/template/js/popper.min.js"></script>
    <script src="~/template/js/bootstrap.min.js"></script>
    <script src="~/template/js/owl.carousel.min.js"></script>
    <script src="~/template/js/isotope.pkgd.min.js"></script>
    <script src="~/template/js/one-page-nav-min.js"></script>
    <script src="~/template/js/slick.min.js"></script>
    <script src="~/template/js/ajax-form.js"></script>
    <script src="~/template/js/wow.min.js"></script>
    <script src="~/template/js/jquery.meanmenu.min.js"></script>
    <script src="~/template/js/jquery.barfiller.js"></script>
    <script src="~/template/js/jquery.scrollUp.min.js"></script>
    <script src="~/template/js/imagesloaded.pkgd.min.js"></script>
    <script src="~/template/js/jquery.counterup.min.js"></script>
    <script src="~/template/js/waypoints.min.js"></script>
    <script src="~/template/js/jquery.magnific-popup.min.js"></script>
    <script src="~/lib/fullcalendar-6.0.1/dist/index.global.min.js"></script>
    <script src="~/js/moment.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/template/js/plugins.js"></script>
    <script src="~/js/site.js"></script>
    <script src="~/lib/ckeditor/ckeditor.js"></script>
    <script src="~/lib/ckeditor/customckeditor.js"></script>
    <script src="~/lib/ckeditor/ck-editor-initialize.js"></script>
    <script src="~/lib/ckeditor/plugins/insertimage/plugin.js"></script>
    <script src="~/template/aos/aos.js"></script>

    <script src="~/js/site.js"></script>
    <script src="~/template/js/main.js"></script>

    <script src="~/template/js/custom.js"></script>
    <script src="~/template/js/custom.min.js"></script>

    @await RenderSectionAsync("Scripts",required: false)

</body>
</html>
